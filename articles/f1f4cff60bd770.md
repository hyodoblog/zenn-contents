---
title: "Firebase Functionsã®Deployã‚’GitHub Actionsã§è¡Œã†éš›ã®ç’°å¢ƒå¤‰æ•°å•é¡Œã«ã¤ã„ã¦"
emoji: "ğŸ¦”"
type: "tech"
topics:
  - "firebase"
  - "cloudfunctions"
  - "firebasefunctions"
  - "ç’°å¢ƒå¤‰æ•°"
published: true
published_at: "2022-09-30 17:56"
---

ãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯å•é¡Œãªãã§ãã¦ã„ãŸFirebase Functionsã®ãƒ‡ãƒ—ãƒ­ã‚¤ã§ã™ãŒã€GitHuï½‚ Actionsã ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¾ã—ãŸã€‚

```bash
âœ”  functions: Finished running predeploy script.
i  functions: ensuring required API cloudfunctions.googleapis.com is enabled...
i  functions: ensuring required API cloudbuild.googleapis.com is enabled...
i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled...
âœ”  artifactregistry: required API artifactregistry.googleapis.com is enabled
âœ”  functions: required API cloudbuild.googleapis.com is enabled
âœ”  functions: required API cloudfunctions.googleapis.com is enabled
i  functions: preparing codebase default for deployment
i  functions: Loaded environment variables from .env.

Error: Failed to load function definition from source: Failed to generate manifest from function source: Error: Failed to parse private key: Error: Only 8, 16, 24, or 32 bits supported: 528
```

å•é¡Œã®ç®‡æ‰€ã¯ã“ã“ã§ã™ã€‚

```bash
Failed to load function definition from source: Failed to generate manifest from function source: Error: Failed to parse private key: Error: Only 8, 16, 24, or 32 bits supported: 528
```

ç’°å¢ƒå¤‰æ•°ã¯ã€GitHub Secretsã‹ã‚‰èª­ã¿å–ã£ã¦ãŠã‚Šã¾ã™ã€‚
.envã®ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã‚“ã ã‚ã¨ã«ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¦ãŠã‚Šã€ã‚¨ãƒ©ãƒ¼åˆ†ã‚’è¦‹ã‚‹ã¨`Failed to parse private key`ã¨æ›¸ã„ã¦ã„ã‚‹ãŸã‚ã€`privateã€€key`å‘¨ã‚ŠãŒå•é¡Œã ã¨ã‚ã‹ã‚Šã¾ã™ã€‚


# çµè«–

ä»¥ä¸‹ã®ã‚ˆã†ãª`private key`ã‚’ç’°å¢ƒå¤‰æ•°å†…ã§å–ã‚Šæ‰±ã£ã¦ã„ã‚‹å ´åˆã€**ã‚»ãƒŸã‚³ãƒ­ãƒ³ã‚’å¤–ã›ã°è§£æ±ºã—ã¾ã™ã€‚**

```bash
-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n
```


# è€ƒå¯Ÿ

ã‚¨ãƒ©ãƒ¼æ–‡ã«ã‚‚æ›¸ã„ã¦ã‚ã‚‹ã¨ãŠã‚Šã€ã‚¨ãƒ©ãƒ¼ã®åŸå› ã¯`private key`ã®JSONãƒ‘ãƒ¼ã‚¹ã«å¤±æ•—ã—ãŸã‹ã‚‰ã§ã™ã€‚
GitHub Actionsä¸Šã§ã¯`private key`ã«ã‚»ãƒŸã‚³ãƒ­ãƒ³ã‚’ã¤ã‘ã‚‹ã“ã¨ã§JSONã¨ã—ã¦èªè­˜ã™ã‚‹ã“ã¨ã§ããªããªã£ãŸã®ã§ã¯ãªã„ã‹ã¨è€ƒãˆã¦ã¾ã™ã€‚

https://stackoverflow.com/questions/50299329/node-js-firebase-service-account-private-key-wont-parse


# ã¾ã¨ã‚

Firebase Functionsã‚’ä½¿ã£ã¦é–‹ç™ºã™ã‚‹éš›ã€GCPã®ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ã‚’æ‰±ã†ã“ã¨ãŒå¤šã€…ã‚ã‚Šã¾ã™ã€‚ãã®ã‚­ãƒ¼å†…ã®`private key`å˜ä½“ã§æ‰±ã†ã¨ãã¯æ³¨æ„ã—ã¾ã—ã‚‡ã†ï¼

Firebase Functionså†…ã§ç’°å¢ƒå¤‰æ•°ã‚’æ‰±ã†æ–¹æ³•ã¯ã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã—ã£ã‹ã‚Šæ›¸ã‹ã‚Œã¦ã¾ã™ã€‚
https://firebase.google.com/docs/functions/config-env?hl=ja#managing_secrets
